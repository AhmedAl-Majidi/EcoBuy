<div class="container mt-4">
  
  <div class="card shadow">
    <div class="card-header d-flex justify-content-between align-items-center">
      <h2 class="mb-0">My Cart</h2>
      <button
        class="btn-close"
        aria-label="Close"
        (click)="closeCart()"
      ></button>
    </div>
  
    <div class="card-body">
      @if(!cartData.products.length){
        <div class="text-center">No items yet!</div>
      }
      @else{
      <div
        *ngFor="let product of cartData.products"
        class="d-flex align-items-center mb-3 border-bottom pb-3 justify-content-between"
      >
        <!-- product image and details -->
        <div class="align-items-center d-flex">
          <img
            src="{{ product.images[0] }}"
            alt="{{ product.title }}"
            class="product-image img-fluid me-3"
          />
          <div class="d-flex flex-column flex-grow-1 justify-content-center">
            <div class="flex-grow-1">
              <div class="d-flex justify-content-between">
                <div class="fw-bold">{{ product.title }}</div>
              </div>
              <div class="input-group mt-2" style="max-width: 120px">
                <label for="quantity"
                  >Quantity:
                  <input
                    id="quantity"
                    name="quantity"
                    type="number"
                    class="form-control"
                    min="1"
                    step="1"
                    [(ngModel)]="product.quantity"
                    (ngModelChange)="updateCart(product.id, product.quantity)"
                  />
                </label>
              </div>
            </div>
            <span class="text-muted"
              >Price:{{ product.price | currency : "USD" }}</span
            >
          </div>
        </div>

        <!-- delete button -->
        <div>
          <button
            class="btn btn-outline-danger ms-3 d-block"
            (click)="removeCartItem(product.id)"
          >
            üóëÔ∏è
          </button>
        </div>
      </div>
    }
    </div>
    <div class="card-footer d-flex justify-content-center">
      <button
        type="button"
        class="btn btn-secondary me-3 w-50"
        (click)="closeCart()"
      >
        Back
      </button>
      <button
        type="button"
        class="btn btn-secondary w-50"
        (click)="handleCheckout()"
      >
        Checkout
      </button>
    </div>
  </div>
</div>
